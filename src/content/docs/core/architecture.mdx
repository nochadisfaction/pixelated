---
title: 'Core Architecture'
description: 'Understanding Gradiants core architecture and components'
pubDate: '2025-01-01'
author: 'Pixelated Empathy Team'
draft: false
toc: true
share: true
---

## Overview

Pixelated is built on a modern, scalable architecture that prioritizes security, real-time communication, and AI integration. The system consists of several key components working together to provide a seamless experience.

<Frame>
```mermaid
graph TD
  C
  l
  i
  e
  n
  t[Client Application]
  --> 
  A
  P
  I[API Gateway]
  A
  P
  I
  --> 
  A
  u
  t
  h[Authentication Service]
  A
  P
  I
  --> 
  S
  e
  s
  s
  i
  o
  n[Session Service]
  A
  P
  I
  --> 
  A
  I[AI Service]
  S
  e
  s
  s
  i
  o
  n
  --> 
  W
  e
  b
  S
  o
  c
  k
  e
  t[WebSocket Server]
  S
  e
  s
  s
  i
  o
  n
  --> 
  D
  B[(Supabase Database)]
  A
  I
  --> 
  L
  L
  M[Language Models]
  L
  L
  M
  --> 
  O
  p
  e
  n
  A
  I[OpenAI]
  L
  L
  M
  --> 
  A
  n
  t
  h
  r
  o
  p
  i
  c[Anthropic]
  L
  L
  M
  --> 
  G
  o
  o
  g
  l
  e
  A
  I[Google AI]
```
</Frame>

## Core Components

### Client Application

The frontend is built with:

- Vite for development and building
- React for UI components
- WebSocket for real-time communication
- End-to-end encryption for secure messaging

### API Gateway

The API gateway handles:

- Request routing
- Authentication
- Rate limiting
- Request validation
- CORS configuration

### Authentication Service

Built on Supabase Auth, providing:

- User registration and login
- Session management
- Password reset flows
- Role-based access control
- JWT token management

### Session Service

Manages therapy sessions with:

- Real-time communication
- Session state management
- Message persistence
- Analytics and reporting
- Crisis detection

### AI Service

Integrates multiple AI models for:

- Message processing
- Sentiment analysis
- Topic extraction
- Crisis detection
- Response suggestions

### WebSocket Server

Handles real-time communication:

- Secure message delivery
- Presence management
- Heartbeat monitoring
- Connection recovery

### Database

Uses Supabase (PostgreSQL) for:

- User data
- Session records
- Message history
- Analytics data
- System configuration

## Security Architecture

### Authentication Flow

<Frame>
```mermaid
sequenceDiagram
  participant Client
  participant API
  participant Auth
  participant DB
  C
  l
  i
  e
  n
  t->>API: Login Request
  A
  P
  I->>Auth: Validate Credentials
  A
  u
  t
  h->>DB: Check User
  D
  B-->>Auth: User Data
  A
  u
  t
  h-->>API: JWT Token
  A
  P
  I-->>Client: Session Token
```
</Frame>

### Data Security

1. **Encryption**

   - End-to-end encryption for messages
   - At-rest encryption for stored data
   - TLS for all API communication

2. **Access Control**

   - Role-based access control
   - Row-level security in database
   - Token-based authentication
   - API key management

3. **Audit Logging**
   - Security event logging
   - Access pattern monitoring
   - Error tracking
   - Performance metrics

## AI Integration

### Model Pipeline

<Frame>
```mermaid
graph LR
  I
  n
  p
  u
  t[User Input]
  --> 
  P
  r
  e
  p
  r
  o
  c
  e
  s
  s[Preprocessing]
  P
  r
  e
  p
  r
  o
  c
  e
  s
  s
  --> 
  M
  o
  d
  e
  l
  s[AI Models]
  M
  o
  d
  e
  l
  s
  --> 
  A
  n
  a
  l
  y
  s
  i
  s[Analysis]
  M
  o
  d
  e
  l
  s
  --> 
  G
  e
  n
  e
  r
  a
  t
  i
  o
  n[Generation]
  A
  n
  a
  l
  y
  s
  i
  s
  --> 
  O
  u
  t
  p
  u
  t[Response]
  G
  e
  n
  e
  r
  a
  t
  i
  o
  n
  --> Output
```
</Frame>

### Model Selection

The system dynamically selects the most appropriate AI model based on:

- Task requirements
- Response time needs
- Cost considerations
- Availability
- Specialization

## Scalability

### Horizontal Scaling

Components that can be horizontally scaled:

- API servers
- WebSocket servers
- AI processing nodes
- Database reads

### Vertical Scaling

Resources that benefit from vertical scaling:

- Database writes
- AI model inference
- Real-time processing

## Monitoring

### System Health

Monitored metrics include:

- API response times
- WebSocket connections
- Database performance
- AI model latency
- Error rates

### Business Metrics

Tracked indicators include:

- Active sessions
- User engagement
- AI response quality
- Crisis detection accuracy
- System usage patterns

## Development

### Local Setup

Development environment requires:

- Node.js >= 16.x
- Python >= 3.11
- Local database
- Environment configuration

### Deployment

Deployment options include:

- Docker containers
- Kubernetes clusters
- Cloud services (AWS, GCP)
- Custom infrastructure

## Next Steps

<CardGroup>
  <Card title="Authentication" icon="lock" href="/core/authentication">
    Learn about the authentication system
  </Card>
  <Card title="Sessions" icon="messages" href="/core/sessions">
    Understand session management
  </Card>
  <Card title="AI Integration" icon="robot" href="/core/ai-integration">
    Explore AI capabilities
  </Card>
</CardGroup>
